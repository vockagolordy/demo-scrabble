<?xml version="1.0" encoding="UTF-8"?>
<!-- /resources/game.fxml -->
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import scrabble.client.view.components.BoardCanvas?>
<?import scrabble.client.view.components.RackView?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="scrabble.client.controller.GameController"
            styleClass="game-root">

    <top>
        <HBox spacing="20" styleClass="game-header" alignment="CENTER_LEFT">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>

            <VBox spacing="5">
                <Label fx:id="roomNameLabel" text="Комната: " styleClass="room-name"/>
                <Label fx:id="turnLabel" text="Ожидание хода..." styleClass="turn-indicator"/>
            </VBox>

            <Separator orientation="VERTICAL"/>

            <VBox spacing="5">
                <Label text="Игроки:" styleClass="section-title"/>
                <HBox fx:id="playersContainer" spacing="10"/>
            </VBox>

            <Separator orientation="VERTICAL"/>

            <VBox spacing="5">
                <Label fx:id="timerLabel" text="Время: 00:00" styleClass="timer"/>
                <Label fx:id="scoreLabel" text="Очки: 0" styleClass="score-display"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <Button fx:id="surrenderButton" text="Сдаться" styleClass="danger-button" onAction="#handleSurrender"/>
            <Button fx:id="leaveButton" text="Выйти" styleClass="neutral-button" onAction="#handleLeaveGame"/>
        </HBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.7" orientation="HORIZONTAL">

            <!-- Левая часть: игровое поле -->
            <VBox spacing="15" styleClass="game-board-container">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <HBox spacing="20" alignment="CENTER">
                    <Button fx:id="exchangeButton" text="Обменять фишки"
                            styleClass="action-button" onAction="#handleExchangeTiles"/>
                    <Button fx:id="skipButton" text="Пропустить ход"
                            styleClass="action-button" onAction="#handleSkipTurn"/>
                    <Button fx:id="submitButton" text="Сделать ход"
                            styleClass="primary-button" onAction="#handleSubmitMove" disable="true"/>
                </HBox>

                <StackPane styleClass="board-wrapper">
                    <BoardCanvas fx:id="boardCanvas"/>
                </StackPane>

                <!-- Полка с фишками игрока -->
                <VBox spacing="10" alignment="CENTER">
                    <Label text="Ваши фишки:" styleClass="section-title"/>
                    <RackView fx:id="rackView" styleClass="player-rack"/>
                </VBox>
            </VBox>

            <!-- Правая часть: информация и чат -->
            <VBox spacing="15" styleClass="game-info-panel">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <Label text="Таблица очков" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16" />
                    </font>
                </Label>

                <TableView fx:id="scoreTable" styleClass="score-table" prefHeight="150">
                    <columns>
                        <TableColumn text="Игрок" fx:id="playerColumn" prefWidth="150"/>
                        <TableColumn text="Очки" fx:id="scoreColumn" prefWidth="100"/>
                    </columns>
                </TableView>

                <Separator/>

                <Label text="История ходов" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16"/>
                    </font>
                </Label>

                <ListView fx:id="movesHistory" styleClass="moves-history" prefHeight="150"/>

                <Separator/>

                <Label text="Игровой чат" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16"/>
                    </font>
                </Label>

                <TextArea fx:id="gameChatArea" editable="false"
                          styleClass="game-chat" VBox.vgrow="ALWAYS"/>

                <HBox spacing="10">
                    <TextField fx:id="gameChatInput" promptText="Введите сообщение..."
                               HBox.hgrow="ALWAYS" onAction="#handleGameChat"/>
                    <Button fx:id="sendGameChatButton" text="Отправить"
                            onAction="#handleGameChat"/>
                </HBox>
            </VBox>

        </SplitPane>
    </center>

    <bottom>
        <HBox spacing="10" styleClass="game-status-bar" alignment="CENTER_LEFT">
            <padding>
                <Insets top="5" right="20" bottom="5" left="20"/>
            </padding>

            <Label fx:id="statusLabel" text="Готов к игре..." styleClass="game-status"/>
            <ProgressIndicator fx:id="thinkingIndicator" visible="false" prefWidth="20" prefHeight="20"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="tilesLeftLabel" text="Фишек осталось: 100"
                   styleClass="tiles-counter"/>
        </HBox>
    </bottom>

</BorderPane>