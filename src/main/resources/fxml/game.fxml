<?xml version="1.0" encoding="UTF-8"?>
<!-- /resources/game.fxml -->
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import scrabble.client.view.components.BoardCanvas?>
<?import scrabble.client.view.components.RackView?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="scrabble.client.controller.GameController"
            styleClass="game-root">

    <top>
        <HBox spacing="20" styleClass="game-header" alignment="CENTER_LEFT">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>

            <VBox spacing="5">
                <Label fx:id="roomNameLabel" text="Room: " styleClass="room-name"/>
                <Label fx:id="turnLabel" text="Waiting for turn..." styleClass="turn-indicator"/>
            </VBox>

            <Separator orientation="VERTICAL"/>

            <VBox spacing="5">
                <Label text="Players:" styleClass="section-title"/>
                <HBox fx:id="playersContainer" spacing="10"/>
            </VBox>

            <Separator orientation="VERTICAL"/>

            <VBox spacing="5">
                <Label fx:id="timerLabel" text="Time: 00:00" styleClass="timer"/>
                <Label fx:id="scoreLabel" text="Scores: 0" styleClass="score-display"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <Button fx:id="surrenderButton" text="Give up" styleClass="danger-button" onAction="#handleSurrender"/>
            <Button fx:id="leaveButton" text="Leave" styleClass="neutral-button" onAction="#handleLeaveGame"/>
        </HBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.7" orientation="HORIZONTAL">

            <VBox spacing="15" styleClass="game-board-container">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <HBox spacing="20" alignment="CENTER">
                    <Button fx:id="exchangeButton" text="Change tiles"
                            styleClass="action-button" onAction="#handleExchangeTiles"/>
                    <Button fx:id="skipButton" text="Skip turn"
                            styleClass="action-button" onAction="#handleSkipTurn"/>
                    <Button fx:id="submitButton" text="Make move"
                            styleClass="primary-button" onAction="#handleSubmitMove" disable="true"/>
                </HBox>

                <StackPane styleClass="board-wrapper">
                    <BoardCanvas fx:id="boardCanvas"/>
                </StackPane>

                <VBox spacing="10" alignment="CENTER">
                    <Label text="Your tiles:" styleClass="section-title"/>
                    <RackView fx:id="rackView" styleClass="player-rack"/>
                </VBox>
            </VBox>

            <VBox spacing="15" styleClass="game-info-panel">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <Label text="Scores table" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16" />
                    </font>
                </Label>

                <TableView fx:id="scoreTable" styleClass="score-table" prefHeight="150">
                    <columns>
                        <TableColumn text="Player" fx:id="playerColumn" prefWidth="150"/>
                        <TableColumn text="Scores" fx:id="scoreColumn" prefWidth="100"/>
                    </columns>
                </TableView>

                <Separator/>

                <Label text="Turns history" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16"/>
                    </font>
                </Label>

                <ListView fx:id="movesHistory" styleClass="moves-history" prefHeight="150"/>

                <Separator/>

                <Label text="Game chat" styleClass="panel-title">
                    <font>
                        <Font name="Arial" size="16"/>
                    </font>
                </Label>

                <TextArea fx:id="gameChatArea" editable="false"
                          styleClass="game-chat" VBox.vgrow="ALWAYS"/>

                <HBox spacing="10">
                    <TextField fx:id="gameChatInput" promptText="Enter message..."
                               HBox.hgrow="ALWAYS" onAction="#handleGameChat"/>
                    <Button fx:id="sendGameChatButton" text="Send"
                            onAction="#handleGameChat"/>
                </HBox>
            </VBox>

        </SplitPane>
    </center>

    <bottom>
        <HBox spacing="10" styleClass="game-status-bar" alignment="CENTER_LEFT">
            <padding>
                <Insets top="5" right="20" bottom="5" left="20"/>
            </padding>

            <Label fx:id="statusLabel" text="Ready for the game..." styleClass="game-status"/>
            <ProgressIndicator fx:id="thinkingIndicator" visible="false" prefWidth="20" prefHeight="20"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="tilesLeftLabel" text="Tiles left: 100"
                   styleClass="tiles-counter"/>
        </HBox>
    </bottom>

</BorderPane>